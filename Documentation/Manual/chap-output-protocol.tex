\chapter{Output Protocol}

\section{Protocol Changes}

\Defgeneric {line-style-effective-thickness} {line-style medium}

Returns the thickness in device units of a line,
rendered on \textit{medium} with the style \textit{line-style}.

\Defgeneric {(setf output-record-parent)} {parent record}

Set the parent of the output record \textit{record}
to \textit{parent}.  The value of \textit{parent} may be an output
record or \texttt{nil}.

\Defgeneric {replay-output-record}
{(record stream \optional region x-offset y-offset)}

Displays the output captured by \textit{record} on the
\textit{stream}, exactly as it was originally captured. The current
user transformation, line style, text style, ink and clipping region
of \textit{stream} are all ignored. Instead, these are gotten from the
output record.

Only those records that overlap \textit{region} are displayed.

%% @include fun-clim-map-over-output-records-containing-position.texi
%% @include fun-clim-map-over-output-records-overlapping-region.texi

%% @c XXX \defgeneric displayed-output-record-ink for text records

%% Sets @var{record} to be the parent of @var{child}.
%% @end deffn

%% @deffn {Generic Function} {delete-output-record} child record &optional (errorp t)

%% If @var{child} is a child of @var{record}, sets the parent of
%% @var{child} to @cl{nil}.
%% @end deffn

%% @deffn {Generic Function} {clear-output-record} record
%% @end deffn

%% Sets the parent of all children of @var{record} to @cl{nil}.

%% @c \defgeneric {invoke-with-new-output-record} :parent key

%% @include macro-clim-with-new-output-record.texi
%% @include macro-clim-with-output-to-output-record.texi
